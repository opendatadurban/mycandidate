<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Find your Candidate for Elections">
    <meta name="author" content="Open Cities Lab">
    <link rel="icon" href="/static/favicon.png">



    <!-- Bootstrap core CSS -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/style.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    {#
    <link href="static/css/select2min.css" rel="stylesheet">#}
<style>
    .tab-content .panel.panel-info #results a{
        color: {{config.candidate_names_colour}};
    }
    .tab-content .panel.panel-info .btn.btn-primary{
        border-color:{{config.find_candidates_button}} ;
        background-color: {{config.find_candidates_button}};
    }

    .footer-below a, .nav-heading .purple-tittle{
        color: {{config.logo_colour}};
    }
    .footer-below .btn.btn-mini.btn-primary{
        background: transparent;
        padding: 12px;
        border-color:{{config.logo_colour}} ;
        color: {{config.logo_colour}};
        
    }
    .grey-wrapper .nav-tabs li.active a{
        background-color: {{config.body_foreground_colour}};
    }
</style>

<script>
    window.Userback = window.Userback || {};
    Userback.access_token = '7688|88791|ha8YH6mRJBS2dBoMh4GPd5I1qncr7GqYxyNMjBOSgrHO5Z1b44';
    (function(d) {
      var s = d.createElement('script');s.async = true;
      s.src = 'https://static.userback.io/widget/v1.js';
      (d.head || d.body).appendChild(s);
    })(document);
  </script>
</head>

<body style="background-color: {{config.footer_colour}};">
    <div class="nav-heading" style="background-color: {{config.nav_bars_colour}};" >
        <div class="container">
            <a href="/" class="trigger"></a>
            <div class="row">
                <div class="col-12">
                    <h5 class="light-title">MyCandidate</h5>
                    <h4 class="purple-tittle" style="color:{{config.logo_colour}} ;">{{config.title}}</h4>
                </div>
            </div>
        </div>
    </div>
    {% set unique_candidate_types = [] %}
    <div class="grey-wrapper" style="background-color: {{config.body_background_colour}};">
        <ul class="nav nav-tabs" id="candidate-type-list ">
            {% for d in data %}
            <li id="nav-{{loop.index}}" class=" {% if area_name == d.candidate_type %} active {% endif %}" style="width: {{100/data|length}}%;"><a data-toggle="tab" href="#{{d.candidate_type}}">{{d.candidate_type.replace('_', ' ').title()}}</a></li>
            {% endfor %}
        </ul>
    </div>

    <div class="tab-content" style="background-color: {{config.body_foreground_colour}};">
        <div class="container">
            <div class="row">
                {% for d in data %}
                <div id="{{d.candidate_type}}" class=" tab-pane fade {% if area_name == d.candidate_type  %} active in {% endif %}">
                        <div class="panel panel-info" style="background-color: {{config.body_foreground_colour}};">
                            {% if d.candidate_type == 'provincial' %}
                            <p class="description">{{config.provincial_explainer}}</p>
                            {% endif %}
                            {% if d.candidate_type == 'national_regional' %}
                            <p class="description">{{config.regional_explainer}}</p>
                            {% endif %}
                            {% if d.candidate_type == 'national' %}
                            <p class="description">{{config.national_explainer}}</p>
                            {% endif %}
                            <div class="panel-heading">Find out who is contesting</div>
                            <div class="panel-body">
                                <form action="/" method="POST">
                                    {{ d.form.csrf_token }}
                                    {{ d.form.hidden_tag() }}
                                    {% set id = 'js-example-basic-single-' + loop.index|string %}
                                    <div class="form-group">
                                        <label class="control-label" for="address">Search:</label>
                                        <div class="input-group">
                                            {{ d.form.ds_id(class="form-control", id=id ) }}
                                            <input type="text" name="candidate_type" value="{{d.candidate_type}}" hidden>
                                            <span class="input-group-btn">
                                                <button type="submit" class="btn btn-primary" id="submit-btn" style="background-color: {{config.find_candidates_button}};">Find Candidates</button>
                                            </span>
                                        </div>
                                    </div>
                                </form>
    
                                {% if candidates and candidate.candidate_type == d.candidate_type %}
                                    <div id="results">
                                        {% if d.candidate_type %}
                                            <h2>{{ d.candidate_type.replace('_', ' ').title() }}: {{ candidate.list_type }}</h2>
                                            <a href="http://www.google.com/search?q={{ candidate.list_type }}" class="mb-3"
                                                target="_blank">Get more information for: {{ candidate.list_type }}</a>
                                            <h2>Your candidates are:</h2>
                                            {% for item in candidates %}
                                                <div class="item">
                                                    <a target="_blank" href="http://www.google.com/search?q={{ item.full_names }} {{ item.surname }}">
                                                        {{loop.index}}. {{ item.full_names }} {{ item.surname }}
                                                    </a><!--(Sex: {{ item.gender }})-->
                                                        {%set item_name = item.locator.strip("{}").split(',')[0] %}
                                                        {%set item_code = item.locator.strip("{}").split(',')[1] %}
                                                        {% if item.party %} - {{item.party}}{% endif %} - {{item[item_name]}} {% if item_code %}- {{item[item_code]}}{% endif %}
                                                        (Age: {{ item.age }})</div>
                                            {% endfor %}
                                            {% for candidate in presidential_candidates %}
                                                <h2>Your Presidential Candidates are:</h2>
                                                <div class="item">
                                                    <a target="_blank"
                                                        href="http://www.google.com/search?q={{ candidate.full_names }} {{ candidate.surname }}">
                                                        {{loop.index}}. {{ candidate.full_names }} {{ candidate.surname }}
                                                    </a> - {{ candidate.party }}</div>
                                                {% endfor %}
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>


    {% block content %}

    {% endblock content %}
    <div class="footer-below text-center" style="background-color: {{config.footer_colour}};" >
        <div class="container">
            <div class="row">
                <div class="row text-center mt-2">
                    <a href="#" class="btn btn-mini btn-primary" data-toggle="modal" data-target="#basicModal">Embed
                        this
                        widget</a>
                </div>
                <br>
                <div class="col-lg-12 font-style" style="">
                    A Product of <a target="_blank"
                        href="https://opencitieslab.org">Open Cities Lab</a> </br></br>

                    <p>We respect your privacy!</p>

                    <span>
                        The MyCandidate tool does not store any user information, including your address.</br></br>

                        We are still building and improving the platform
                        and your feedback will be much appreciated.
                    </span>

                </div>
                <br>
                <div class="col-lg-12 font-style" style="margin-top: 30px;">

                    <p style="margin-bottom: 5px;">Disclaimer</p>

                    <span>
                        The candidate information on this platform <a target="_blank"
                        href="https://www.elections.org.za/pw/Parties-And-Candidates/Candidates-List">comes from the IEC website</a> and is for general information only. We try to keep it accurate, 
                        but it may have errors or missing details due to issues with the original data. We are not responsible for any mistakes or losses from using this data, you use it at your own risk.
                    </span>

                </div>
                <br>
            </div>
        </div>
    </div>

    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Embed Code</h4>
                </div>
                <div class="modal-body">
                    <div id="results">
                        <p><code id="clipboardExample1">
                        &lt;iframe src="{{ domain }}" style="border: none;width: 100%; height:
                        400px"&gt;&lt;/iframe&gt;
                    </code></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- Custom styles for this template -->
<link href="static/css/voting.css" rel="stylesheet">
<script src="/static/js/jquery.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    {% for d in data %}
    $('#js-example-basic-single-{{loop.index}}').select2({
        placeholder: 'Select an option'
    });
    {% endfor %}
</script>

</html>